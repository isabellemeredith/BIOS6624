---
title: "Project1Initial"
author: "Isabelle Meredith"
date: "2026-02-09"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(dplyr)
library(naniar)
```

## R Markdown


```{r}
dfHIV <- read.csv("./DataRaw/hiv_6624_final.csv") %>% 
  filter(years == 0 | years == 2)

nrow(dfHIV %>% filter(years == 0))
nrow(dfHIV %>% filter(years == 2))

dfCounts <- dfHIV %>% group_by(newid) %>% count() %>% filter(n == 2)

dfHIV <- dfHIV %>% filter(newid %in% dfCounts$newid)

dfHIV <- dfHIV %>% select(newid, AGG_MENT, AGG_PHYS, BMI, SMOKE, LEU3N, VLOAD, RACE, EDUCBAS, age, ADH, years, hard_drugs)

dfHIVWide <- dfHIV %>% pivot_wider(names_from = years, values_from = c(AGG_MENT, AGG_PHYS, BMI, SMOKE, LEU3N, VLOAD, RACE, EDUCBAS, age, ADH, hard_drugs)) %>% select(-c(BMI_2, SMOKE_2, RACE_2, EDUCBAS_2, age_2, ADH_0, hard_drugs_2))

```

```{r}
# Checking missing for analysis variables
naniar::gg_miss_var(dfHIVWide)
naniar::vis_miss(dfHIVWide, warn_large_data = FALSE)

dfHIVCovariates <- dfHIVWide %>% select(BMI_0, SMOKE_0, RACE_0, EDUCBAS_0, age_0, ADH_2, hard_drugs_0)

length(rowSums(is.na(dfHIVWide))[rowSums(is.na(dfHIVWide)) > 1])

length(rowSums(is.na(dfHIVCovariates))[rowSums(is.na(dfHIVCovariates)) > 0])
rowSums(is.na(dfHIVCovariates))

dfHIVFiltered <- dfHIVWide %>% filter(!(is.na(BMI_0) | is.na(SMOKE_0) | is.na(RACE_0) | is.na(EDUCBAS_0) | is.na(age_0) | is.na(ADH_2) | is.na(hard_drugs_0)))

dfHIVFiltered <- dfHIVFiltered %>% filter(BMI_0 > 0 & BMI_0 < 100)

dfHIVOutcomes <- dfHIVFiltered %>% select(AGG_MENT_0, AGG_MENT_2, AGG_PHYS_0, AGG_PHYS_2, LEU3N_0, LEU3N_2, VLOAD_0, VLOAD_2)

rowSums(is.na(dfHIVOutcomes))
length(rowSums(is.na(dfHIVOutcomes))[rowSums(is.na(dfHIVOutcomes)) > 0])

length(rowSums(is.na(dfHIVFiltered[,c("AGG_MENT_0", "AGG_MENT_2")]))[rowSums(is.na(dfHIVFiltered[,c("AGG_MENT_0", "AGG_MENT_2")])) > 0])
rowSums(is.na(dfHIVFiltered[,c("AGG_MENT_0", "AGG_MENT_2")]))

length(rowSums(is.na(dfHIVFiltered[,c("AGG_PHYS_0", "AGG_PHYS_2")]))[rowSums(is.na(dfHIVFiltered[,c("AGG_PHYS_0", "AGG_PHYS_2")])) > 0])
rowSums(is.na(dfHIVFiltered[,c("AGG_PHYS_0", "AGG_PHYS_2")]))

length(rowSums(is.na(dfHIVFiltered[,c("LEU3N_0", "LEU3N_2")]))[rowSums(is.na(dfHIVFiltered[,c("LEU3N_0", "LEU3N_2")])) > 0])
rowSums(is.na(dfHIVFiltered[,c("LEU3N_0", "LEU3N_2")]))

length(rowSums(is.na(dfHIVFiltered[,c("VLOAD_0", "VLOAD_2")]))[rowSums(is.na(dfHIVFiltered[,c("VLOAD_0", "VLOAD_2")])) > 0])
rowSums(is.na(dfHIVFiltered[,c("VLOAD_0", "VLOAD_2")]))
```

```{r}
# Histograms for outcomes
hist(dfHIVWide$AGG_MENT_0)

hist(dfHIVWide$AGG_PHYS_0)

hist(dfHIVWide$LEU3N_0)
hist(log(dfHIVWide$LEU3N_0))

hist(dfHIVWide$VLOAD_0)
hist(log(dfHIVWide$VLOAD_0))

hist(dfHIVWide$AGG_MENT_2)

hist(dfHIVWide$AGG_PHYS_2)

hist(dfHIVWide$LEU3N_2)
hist(log(dfHIVWide$LEU3N_2))

hist(dfHIVWide$VLOAD_2)
hist(log(dfHIVWide$VLOAD_2))
```

```{r}
hist(dfHIVWide$BMI_0)
sort(unique(dfHIVWide$BMI_0))

hist(dfHIVWide$SMOKE_0)
sort(unique(dfHIVWide$SMOKE_0))

hist(dfHIVWide$RACE_0)
sort(unique(dfHIVWide$RACE_0))

hist(dfHIVWide$EDUCBAS_0)
sort(unique(dfHIVWide$EDUCBAS_0))

hist(dfHIVWide$age_0)
range(dfHIVWide$age_0)

hist(dfHIVWide$hard_drugs_0)
sort(unique(dfHIVWide$hard_drugs_0))

hist(dfHIVWide$ADH_2)
sort(unique(dfHIVWide$ADH_2))

dfHIVFiltered %>% group_by(EDUCBAS_0) %>% count()
dfHIVFiltered %>% group_by(RACE_0) %>% count()
dfHIVFiltered %>% group_by(SMOKE_0) %>% count()
```

Age, BMI, smoking, race, adherence, education (not income)
Use baseline values

CD4
-treated: 300-500

Viral load
-very high when untreated (millions)
-can be smaller when treated (can be undetectable)

Questionnaire scores are 0-100


Need to adjust for baseline

Meaningful changes
0.5 log 10 viral change

50 T cells

2 points aggregate QoL


For race

White non-hispanic and not white

For education
College degree and higher
Didn't finish college or lower

Remember to explain how you are interpreting Bayes dumbass

Drop all of the people who don't have a full set of responses at baseline and year 2



